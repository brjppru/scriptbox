		TITLE	BADF.ASM
		PAGE	,132
		INCLUDE	DOS.INC

	STACK	SEGMENT PARA STACK 'STACK'

		DB	4 DUP('STACK')

	STACK ENDS
	DSEG	SEGMENT PARA PUBLIC 'DATA'

	OLDOFF	DW	0
	OLDSEG	DW	0
	FDAT	DB	5H,0,1,2,5H,0,2,2,5H,0,3,2,5H,0,4,2,5H,0,5,2
		DB	5H,0,6,2,5H,0,7,2,5H,0,8,1,5H,0,9,2
        DAT     DB      0DFH,02H,25H,0fH,09H,2AH,0FFH,0AH,0F6H,94H,32H

	DSEG ENDS

	CSEG	SEGMENT PARA PUBLIC 'CODE'
		ASSUME CS:CSEG,DS:DSEG,ES:DSEG,SS:STACK

	ENTRY	PROC FAR

		PUSH 	DS
		SUB 	AX,AX
		PUSH 	AX
		MOV 	AX,DSEG
		MOV 	DS,AX

		MOV 	AX,351EH
		INT	21H
		MOV	OLDSEG,ES
		MOV	OLDOFF,BX

                MOV     DX,OFFSET DAT
		MOV	AX,251EH
		INT	21H

		MOV	AH,0
		MOV	DL,0
		INT	13H

		MOV	AX,90FDH
		INT	15H

		MOV	AX,0509H
		MOV	CX,0501H
		MOV 	DX,0000H
		PUSH	DS
		POP	ES
		MOV	BX,OFFSET FDAT
		INT 	13H

		MOV	DX,OLDOFF
		PUSH	DS
		PUSH	OLDSEG
		POP	DS
		MOV	AX,251EH
		INT	21H
		POP	DS

		MOV	AX,4C00H
		INT	21H

	ENTRY ENDP
    	CSEG ENDS
		END ENTRY