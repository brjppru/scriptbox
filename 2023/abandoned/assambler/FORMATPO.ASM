		TITLE	BADF.ASM
		PAGE	,132
		INCLUDE	DOS.INC

	STACK	SEGMENT PARA STACK 'STACK'

		DB	4 DUP('STACK')

	STACK ENDS
	DSEG	SEGMENT PARA PUBLIC 'DATA'

	OLDOFF	DW	0
	OLDSEG	DW	0
        DAT     DB      0DFH,02H,25H,01H,09H,2AH,0FFH,50H,0F6H,0FH,08H
;       DAT     DB      0DFH,02H,25H,01H,12H,2AH,0FFH,0AH,0F6H,19H,04H
	FDAT	DB	28H,0,1,1,28H,0,2,1,28H,0,3,1,28H,0,4,1,28H,0,5,1
                DB      28H,0,6,1,28H,0,7,1,28H,0,8,1,28H,0,9,1,28H,0,0AH,1
                DB      28H,0,0BH,1,28H,0,0CH,1,28H,0,0DH,1,28H,0,0EH,1
                DB      28H,0,0FH,1,28H,0,10H,1,28H,0,11H,1,28H,0,12H,1

	DSEG ENDS

	CSEG	SEGMENT PARA PUBLIC 'CODE'
		ASSUME CS:CSEG,DS:DSEG,ES:DSEG,SS:STACK

	ENTRY	PROC FAR

		PUSH 	DS
		SUB 	AX,AX
		PUSH 	AX
		MOV 	AX,DSEG
		MOV 	DS,AX

		MOV 	AX,351EH
		INT	21H
		MOV	OLDSEG,ES
		MOV	OLDOFF,BX

                MOV     DX,OFFSET DAT
		MOV	AX,251EH
		INT	21H

                MOV     AX,0509H
                MOV     CX,2801H
		MOV 	DX,0000H
		PUSH	DS
		POP	ES
		MOV	BX,OFFSET FDAT
		INT 	13H

		MOV	DX,OLDOFF
		PUSH	DS
		PUSH	OLDSEG
		POP	DS
		MOV	AX,251EH
		INT	21H
		POP	DS

		MOV	AX,4C00H
		INT	21H

	ENTRY ENDP
    	CSEG ENDS
		END ENTRY