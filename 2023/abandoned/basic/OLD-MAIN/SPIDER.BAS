   SCREEN 1
   WIDTH 40:SPIDER=0
   KEY OFF:CLS:PX=140:PY=84:MODE=2:OX=140:OY=84:PAL=0:CL=15:COL=3:BP=64
   DIM C(10)
   PRESET (1,1):DRAW"C1 blefgh":GET (0,0)-(2,2),C:CLS
   DIM C1(10)
   PRESET (1,1):DRAW"C2 blefgh":GET(0,0)-(2,2),C1:CLS
   DIM C2(10)
   PRESET (1,1):DRAW "C3 blefgh":GET(0,0)-(2,2),C2:CLS
100 GOSUB 670
110 GOSUB 650
    LOCATE 22,1: PRINT "1.Линии нет";
    LOCATE 22,20: PRINT "5.Постaвить точку";
    LOCATE 23,1: PRINT "2.Линия есть";
    LOCATE 23,20: PRINT "6.В нaчоло отрезкa";
    LOCATE 24,1: PRINT "3.Стирaть лучи";
    LOCATE 24,20: PRINT "7.Изменить цвет";
    LOCATE 25,1: PRINT "4.Рисовaть лучи";
    LOCATE 25,20: PRINT "8.Очистить экрaн";
    GOTO 410
210 A$=INKEY$:GOSUB 730:GOSUB 660:GOSUB 730:IF A$="" THEN GOTO 210
    IF A$<"1" OR A$>"8" THEN GOTO 240
    ON VAL(A$) GOTO 410,410,410,410,410,490,500,640
240 A$=RIGHT$(A$,1):IF A$="K" AND PX>8 THEN MX=-1:MY=0:GOTO 320
250 IF A$="M" AND PX<309 THEN MX=1:MY=0:GOTO 320
    IF A$="H" AND PY>16 THEN MX=0:MY=-1:GOTO 320
    IF A$="P" AND PY<159 THEN MX=0:MY=1:GOTO 320
    IF A$="G" THEN ON MODE GOTO 250,380,380,390,400
    IF A$="I" THEN SPIDER=SPIDER+1:IF SPIDER >2 THEN SPIDER=0
    IF A$=CHR$(27) THEN CLS:END
    GOTO 210
320 IF MODE <> 2 THEN 340
    LINE (OX,OY)-(PX,PY),0:PX=PX+MX:PY=PY+MY:LINE (OX,OY)-(PX,PY),COL: GOTO 210
340 IF MODE <> 3 THEN 360
    PX=PX+MX:PY=PY+MY:LINE (OX,OY)-(PX,PY),0: GOTO 210
360 PX=PX+MX:PY=PY+MY:GOTO 210
    MODE=2:GOTO 210
380 OX=PX:OY=PY:SOUND 37,1:GOTO 210
390 LINE (OX,OY)-(PX,PY),COL:PX=OX:PY=OY:SOUND 37,1:GOTO 210
400 PSET (PX+1,PY+1),COL: GOTO 210
410 M=MODE: ON VAL(A$) GOTO 420,430,440,460,480
420 MODE=1
430 MODE=2: OX=PX:OY=PY:GOTO 210
440 MODE=3:GOTO 210
    OX=PX:OY=PY:GOTO 210
460 MODE=4:GOTO 210
    OX=PX:OY=PY:GOTO 210
480 MODE=5:GOTO 210
490 PX=OX:PY=OY:GOTO 210
500 GOTO 510
510 LOCATE 22,1:PRINT"Пaлитрa 0";:PRINT SPC(10);
    LOCATE 22,20:PRINT"Пaлитрa 1";:PRINT SPC(10);
    LOCATE 23,1:PRINT"1.Зелёный";:PRINT SPC(10);
    LOCATE 23,20:PRINT"4.Голубой";:PRINT SPC(10);
    LOCATE 24,1:PRINT"2.Крaсный";:PRINT SPC(10);
    LOCATE 24,20:PRINT"5.Лиловый";:PRINT SPC(10);
    LOCATE 25,1:PRINT"3.Желтый";:PRINT SPC(10);
    LOCATE 25,20:PRINT"6.Белый";:PRINT SPC(10);
590 B$=INKEY$
    IF B$="" THEN 590 ELSE IF B$<"1" OR B$>"6" THEN GOTO 590
    COL=VAL(B$):IF COL<4 THEN COL=COL ELSE COL=COL-3
    A$= STR$(MODE)
    GOTO 110
640 CLS:GOTO 100
650 RETURN
660 LOCATE 1,30: PRINT TIME$;:RETURN
670 FOR I=2 TO 39:LOCATE 2,I:PRINT"═";:LOCATE 21,I:PRINT"═";:NEXT
    FOR I=3 TO 20:LOCATE I,1:PRINT"║";:LOCATE I,40:PRINT"║";:NEXT
    LOCATE 2,1: PRINT"╔":LOCATE 2,40:PRINT"╗":LOCATE 21,1:PRINT"╚":LOCATE 21,40:PRINT"╝"
    BP=BP+1:IF BP>90 THEN BEEP:BP=65
    BP$=CHR$(187)+CHR$(BP)+CHR$(201):LOCATE 2,2:PRINT BP$;
    RETURN
730 IF SPIDER=0 THEN PUT (PX,PY),C,XOR:RETURN
    IF SPIDER=1 THEN PUT (PX,PY),C1,XOR:RETURN
    IF SPIDER=2 THEN PUT (PX,PY),C2,XOR:RETURN
