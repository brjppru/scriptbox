# Как отсортировать фотографии? 2017 awersome #

В новогодние праздники 2017 добрался отсортировать библиотеку. Зачем? Вопрос философский. 
Устроить образцовый порядок и казарменное единообразие для себя лично.

# Зачем? #

## Что сподвигло? ##

Отбирал с супругой фотографии для оффлайновых мам и пап. Почему оффлайновых? Для заказа фотоальбома на теплой "ламповой" фотобумаге. 

Для тех, кто не знает, гугль-фото (осени 2015 года) хранит и просматривать на телефоне до сотни гигабайт любимых фотографий. 

Без зависимости объема памяти телефона и сколько производитель телефона в него гигабайт памяти запаял на заводе. 
Клиент-приложение выпускается и под альтернативные платформы аля аплы и ифоны с ипадами, но сам не проверял.

# Ценности #

Что вспомнилось о фотографиях? Год назад на похоронах деда пересматривал фотоальбомы родового дерева. 
Забавно звучал комментарий подрастающих родственников, "А что вы в цвете фотографии не напечатаете? 
Почему цветных мало, а черно-белых много?". И не знаешь, что ответить.

Каждая фотография черно-белом в альбоме - событие. В чем отличие от сегодня?
Каждая канижка-фотоальбом - маленький событийный клад. Срез биографической истории. 

Вот дед приехал в Канск. Вот срубил первый дом. Первый сын. Второй сын. В школу отвели. 
С выпускного принесли. На пороге института. Вот в армии с пряжкой. Уже встречают, накрыли шикарный стол. 
Вот папа с мамой хлеб едят на свадьбах. Вот я на руках появился. 

Сегодня, где эта магия? Куда и как она испарилась? 

Как там у Пелевина было? Инфляция щастья?

Лет десять назад новая пара кроссовок, привезенная дальним родственником из-за бугра, становилась точкой отсчета нового периода в жизни — рисунок подошвы был подобием узора на ладони, по которому можно было предсказать будущее на год вперед. Счастье, которое можно было извлечь из такого приобретения, было безмерным. Теперь, чтобы заслужить право на такой же его объем, надо было покупать как минимум джип, а то и дом… Инфляция счастья.... 

# Ищем магию #

Когда пальцами листаешь фотографии на телефоне в режиме инстаграмов, т.е. следующая, следующая, следующая, лайк, следующая...

После первой сотни снимков из цифрового архива дошло. Магия старых фотоальбомов, не в черно-белом "фильтре", не в бумаге, не в душевности, не в теплоте, не в ванне-фотолаборатории, не в реагентах, а магия события, магическим образом рожденная из света и тени возникшая ваннах советских граждан...

Фотографий "тех времен" мало. Каждая фотография событие с большой буквы. Такую фотографию берешь в руки и смотришь, думаешь, а почему они так одеты? Почему выбрано это место? Почему такие прически? Куда идет вот та тетка на заднем плане? А зачем на плане тазик с водой? А как они расходились после мероприятия? Кто фотографировал? Кто печатал?

Любой обмылок смартфона в 2016 году, есть цифровая камера. Документально запечатлеть может. Уникальность события - размазана на десятки, а то и сотни фотографий. Я на корпоративе - тысячи фотографий. Корпоратив это 25 гигабайт фото обязательно на зеркалку с тамроном. Иначе это не корпоратив. Сходил в туалет - 30 селфи. Новый год встретил - 400 фоток салата "оливье". Пошел с друзьями в боулинг - 600 фоток, из которых 300 это фото шаров. 

# Скука #

Банальная скука. Годы спустя пересматривать эти фотографии корпоративов и боулингов банально скучно. 

Кто уже научился пользоваться google photos и перевел в него событийное достояние, показывая очередное, комментируют, что "подожди, сотовый оператор раздуплица и фото подгрузит, вот была же прикольная! Ну, ну, вот!" 

Подобное действо совершается над теми "гипертрофированными" трехсот шарами из боулинга. И сквозь года, ты понимаешь, что заснятое тобой веселье - напрасный износ механики фотоаппарата, или тестом светосилы объектива - шары, лица, цвета, бокалы с напитками...

# Цифровое бессмертие #

Придет время. Соберется семья. Ставшими взрослыми дети, уже с внуками. Дети которые выросли в руках со смартфонаим.

Допустим на шестидясителетие или поминки. Пишу, что уверен, ты достиг состояния, когда осознаешь свою конечность, но при этом осознание тебя не разрушает. Так, вот собрались и воспылали желанием посмотреть на твой событийный ряд, или посмотреть чем ты жил. Сядут за просмотр фотоархива. Ну или сядут "условно, к тому времени изображение сразу будет в "мозг" минуя передачу на сетчатку и прочего раздражения ненужных синапсов.

При просмотре интерес вызовет тоже самое, что и у тебя. Как родились, как взрослели, как в школу, чем играли в детстве, как учились, как институт, как на работе, как шла карьера, с кем отношались, во что одевались, какие успехи и достижения, как проходила твоя старость? 

Нужны ли для этого тысячи фотографий? Или потом заходишь в папку рабочий стол, временное, фотки, камера, а там фотографий опухнуть можно, а список файлов с ума сходит. Интересно ли?

# И что с этим делать? #

Тезисы:

  - Хранить все фотографии будем у себя локально
  - Копию будем хранить в google photo
  - Архив №1 будет жить на внешнем винте
  - Архив №2 будет жить на в облаке-шмоблаке
  - Архив №3 будет жить на сервере далеко от Красноярсков
  - Архив №4 будет жить на рабочем ноутбуке

# Зацифринг #

Поехал к мамам и папам собрал все бумажные носители информации. Негативы, фото, полароиды, пленки, карточки, вырезки. Все.
Получилось на 25Кг общего веса. Понял, что я быстрее поседею чем, сам с этим справлюсь.
Плюс техника в домашней доступности далека от полиграфического качества.
Негативы сканировать неначем.
Фото формата А3 - неначем.
А снимки с домашнего сканеру мылят.

Отнес все 25 щастья в фотолабараторию. По итогу получил флешку на 16 гиг где каждая фотография была отсканирована.
Обрезана. Восстановлена если порвано. Красота и порядок.

Далее преступил к сортировке всего, что есть по алгоритму "цифра".

# Фотографии #

Для хранения, не выдумал ничего лучше чем следующая структура -> EPOCH/YEARx/Years/Month/файлы

<code bash>
199x -> 1998 -> 01 - > адовое количество файлов точка жыпегэ
</code>

# Готовимся #

  - Скачать пикасу
  - Скачать гуглофотос на комп
  - Скачать total commander + exif (или любое другое)
  - Скачать fdupes (или любое другое)
  - Скачать imagemagic (morgify)
  - Можно включить двухфакторку http://accounts.google.com/SmsAuthConfig

# Пре-сортировка №1 #

  * Берем со всех источников сливаем все фотки в один каталог
  * Да со всех. Прямо в один.
  * Прям как есть, не особо сортируя.
  * Вот как оно всё лежыт, фото 1, папка разобрать, Новая папка 1 и т.д.
  * Сюда же сливаем все со всех видеокамер, телефонов, и прочий медиахлам.
  * Получаем каталог с over 100500 фотографий.

Далее берем например линукс, винду или любое другое альтернативное и удаляем все пустые файлы, что бы система не ругалась.

<code bash>
find /photos -empty -delete
</code>

Затем берем великий fdupes и заставляем его найти и удалить все дубликаты фотографий в текущем каталоге.

<code bash>
/usr/bin/fdupes -R -d -N .
</code>

# Сортировка №1 #

Берем тотал командер -> К нему exif plugin -> Ищем все фотки -> Далее переходим в режим массового переименования файлов -> ctrl-m -> Для начала попытаемся разложить в папке в формате -> [год][месяц][файл] используя то, что написано в exif -> Шаблон

<code bash>
[=exif.DateOriginal.Y]\[=exif.DateOriginal.M]\[N]
</code>

Total начнет сортировку -> 50 гиг обрабатывало примерно 2 часа -> Далее всё что не содержит exif называем точно так-же -> [год][месяц][файл] используя дату создания файла -> шаблон:
<code bash>
[Y]\[M]\[N]
</code>

# Визуальный пресортинг #

Запускам пикасу, кормим папкой с результатами, и визуально удаляем всякий ненужный мусор.

# Алгоритм сортировки #

Экстремальный алгоритм сортировки:

  * Открыли фотографию и спросили себя
    * А я захочу это увидеть ещё раз? -> нет -> в хлам
    * А я увижу ещё раз? Это представляет какую-то событийную или эмоциональную ценность? -> нет -> в хлам
    * А если я оставлю и увижу, это будет меня радовать? -> нет? -> в хлам
    * И последний контрольный для экстемалов - я захочу её напечатать на бумаге?

Алгоритм поперчить, посолить и использовать на свой вкус -> у меня из тысячи фотографий в месяц выживает 70-100.

# Месячник #

В начале месяца слили все за предыдущий в одну папку. С телефошечки, с вазапа, вайбера, рукалицо, вк, и прочих медиасервисов.
В одну папку. Да все.
Прогнали на дубликаты.
Повторили алгоритм.


# Разбор хлама #

Что осталось после "алгоритма" сливаем в отдельную папку. Занимает оно дофига места.
Делаем фотографию размером 800 px с сохранением маштаба -> далее эти фотографии можно убрать в архив, облако или бекапы. 
"Вдруг будет нужно". Можно просто удалить.

<code bash>
mogrify -verbose -auto-orient -resize '800>' *
</code>

# Видео архив #

Примемся за видео. За годы существований архива, на что только и как не снималось -> берем все что походит на

<code bash>
*.flv|*.mp4|*.avi|*.mkv|*.m4a|*.m4v|*.webm|*.wmv|*.3gp|*.mov|*.ts
</code>

Алгоритм

  - Сваливаем в одну папку
  - Устанавливаем VLC или подобное который играет все форматы
  - Смотрим
  - Сортируем
  - Переименовываем
  - Удаляем

  - Далее скармливаем ffmpeg
  - Для избавления от "каши" форматов, приводим все к формату MP4
  - То, что большого размера - можно поджать
  - То, что маленького размера - можно не жать

  - Кстати mp4 показывает тот-же google photos

<code bash>
ffmpeg -hide_banner -i "$file" -filter:a dynaudnorm "$outputname"
</code>

То, что снято в full hd и занимает много место, но сохранить хочется -> причем не в размерах over 100500gb перевести в архив

<code bash>
ffmpeg -hide_banner -i "$file" -s 640x480 -acodec libmp3lame -ar 44100 -ab 128k -ac 1 -filter:a dynaudnorm "$outputname";;
</code>

Самое прекрасное сохранить, остальное нафиг стереть.

# Заливка #

   * Ставим на комп http://photos.google.com/
   * Кормим его папкой
   * Забываем про ноутбук на сутки другие, пока он зальет фото и видео.

# Пользуемся #

Ифон с 16 гигами памяти в 2016 году так себе удовольствие. 
Ставим клиента google photos на смартфон и наслаждаемся всей своей медиатекой за тариф безлимитного интернету. 
Альбомами можно делится, можно делать совместные.

# Забавная статистика #

Ну после такой сортировки можно посмотреть, чем ты снимал и вспомнить что у тебя было их техники сквозь года:

<code bash>
exiftool -T -r -model . | uniq -c | sort -nr | head -n 10
</code>

Моих топ камер:

<code bash>
   4609 ALCATEL ONE TOUCH 6040D
   3457 Sony Ericsson K750i
   2795 ALCATEL ONE TOUCH 6040XD
   2414 Samsung D880
   2038 HTC Wildfire
   1621 Panasonic Lumix DMC-FZ8
   1307 Explay Alto
   1222 NIKON D50
    850 COOLPIX L25
    849 NIKON D80
</code>

{{tag>как отсортировать фотографии exif total google photos picasa upload облако алгоритм сортировки}}